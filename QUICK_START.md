# Quick Start Guide

Follow these steps to get the app running:

## 1. Install Dependencies

```bash
flutter pub get
```

## 2. Generate Model Files

This generates the required `.g.dart` files for JSON serialization:

```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

**Note**: If you see errors about missing files, this is expected. The files will be generated by this command.

## 3. Configure Firebase

Run the FlutterFire CLI to configure Firebase for all platforms:

```bash
flutterfire configure --project=ari-s-esthetician-app
```

This will:
- Register your Flutter app with Firebase
- Generate `lib/core/config/firebase_options.dart`
- Set up iOS, Android, and Web configurations

**Important**: You need to have:
- Firebase CLI installed: `npm install -g firebase-tools`
- Logged in: `firebase login`
- Access to the Firebase project: `ari-s-esthetician-app`

## 4. Deploy Firestore Security Rules

Deploy the security rules and indexes:

```bash
firebase deploy --only firestore
```

This deploys:
- `firestore.rules` - Security rules
- `firestore.indexes.json` - Database indexes

## 5. Create Admin User

You have three options:

### Option A: Using the Script (Recommended)

1. Install Firebase Admin SDK:
   ```bash
   npm install firebase-admin
   ```

2. Set service account credentials:
   ```powershell
   $env:GOOGLE_APPLICATION_CREDENTIALS="C:\path\to\serviceAccountKey.json"
   ```

3. Run the script:
   ```bash
   node scripts/create_admin_user.js admin@example.com yourpassword
   ```

See `scripts/create_admin_user.md` for detailed instructions.

### Option B: Firebase Console (Manual)

1. Go to [Firebase Console → Authentication](https://console.firebase.google.com/project/ari-s-esthetician-app/authentication/users)
2. Click "Add User"
3. Enter email and password
4. Go to [Firestore Database](https://console.firebase.google.com/project/ari-s-esthetician-app/firestore)
5. Create document in `users` collection:
   - Document ID: `[user-uid-from-auth]`
   - Fields:
     ```json
     {
       "email": "admin@example.com",
       "role": "admin",
       "createdAt": [timestamp],
       "updatedAt": [timestamp]
     }
     ```

### Option C: Firebase CLI

Use Firebase CLI with custom functions (advanced).

## 6. Run the App

```bash
# Run on default device
flutter run

# Run on specific platform
flutter run -d chrome    # Web
flutter run -d ios        # iOS
flutter run -d android    # Android
```

## Troubleshooting

### "firebase_options.dart not found"

Run: `flutterfire configure --project=ari-s-esthetician-app`

### "Model files missing (.g.dart)"

Run: `flutter pub run build_runner build --delete-conflicting-outputs`

### "Permission denied" in Firestore

1. Verify rules are deployed: `firebase deploy --only firestore`
2. Check user role in Firestore `users` collection
3. Verify rules in Firebase Console

### "Cannot find Firebase"

1. Check Firebase is initialized in `main.dart`
2. Verify `firebase_options.dart` exists
3. Run `flutter clean` and `flutter pub get`

## Next Steps

After setup is complete:

1. **Test the App**
   - Open booking page (public)
   - Login as admin
   - Access admin dashboard

2. **Configure Business Settings**
   - Go to Admin → Settings
   - Set business name, hours, policies
   - Configure Stripe keys
   - Set up Google Calendar

3. **Add Services**
   - Go to Admin → Services
   - Add your services with pricing
   - Set deposit amounts

4. **Test Booking Flow**
   - Create a test appointment
   - Verify payment processing
   - Check email confirmations

## Support

For issues:
- Check `SETUP.md` for detailed setup instructions
- Check `PROJECT_STATUS.md` for current implementation status
- Review Firebase Console for errors
